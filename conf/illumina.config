// Illumina specific params

params {
    // Path to the scripts folder
    scripts = "$pipeline_dir/scripts"

    // Path to the mutscan file
    mutscan = "ARTICDATA/mutscan.csv"

    // Path to the positive controls file
    posc = "ARTICDATA/COVIDSEQ.fasta"

    // Path to the matricemut file
    matricemut = "ARTICDATA/matricemut2.txt"

    // Path to the bed files of pools
    pool = ["ARTICDATA/nCoV-2019/pool1.bed", "ARTICDATA/nCoV-2019/pool2.bed", "ARTICDATA/nCoV-2019/poolt.bed"]

    // seekContaminant modes
    mode = ["common", "expected", "raw", "cov"]

    // Instead of using the ivar-compatible bed file in the scheme repo, the
    // full path to a previously-created ivar bed file. Must also supply
    // ref.
    bed = "ARTICDATA/nCoV-2019.bed"

    // Instead of indexing the reference file in the scheme repo, the prefix
    // of previously-created reference index files. Must also supply bed.
    // (With these defined, none of the scheme* variables will be used.)
    ref = "ARTICDATA/nCoV-2019.reference.fasta"

    // Illumina sample prefixes - list of strings that prefix samples
    illuminaPrefixes = false

    // illumina fastq search path
    illuminaSuffixes = ['*_R{1,2}_001', '*_R{1,2}', '*_{1,2}' ]
    fastq_exts = ['.fastq.gz', '.fq.gz']

    // Use cram input instead of fastq files
    cram = false
    
    // Output cram instead of bam files
    outCram = false

    // Clean BAM header to anonymise fastq names
    cleanBamHeader = false

    // Allow reads that don't have primer sequence? Ligation prep = false, nextera = true
    allowNoprimer = true

    // Length of illumina reads to keep after primer trimming
    illuminaKeepLen = 30

    // Sliding window quality threshold for keeping reads after primer trimming (illumina)
    illuminaQualThreshold = 20

    // Mpileup depth for ivar (although undocumented in mpileup, setting to zero removes limit)
    mpileupDepth = 0

    // iVar frequency threshold for consensus variant (ivar consensus: -t)
    ivarFreqThreshold = 0.50

    // Minimum coverage depth to call variant (ivar consensus: -m; ivar variants -m)
    ivarMinDepth = 10

    // iVar frequency threshold to call variant (ivar variants: -t )
    ivarMinFreqThreshold = 0.03

    // iVar minimum mapQ to call variant (ivar variants: -q)
    ivarMinVariantQuality = 20

    // Typing frequency threshold to call aa consequences of variant. Set to ivarFreqThreshold for consistency with consensus
    csqAfThreshold = 0.50

    // Minimum coverage depth to call aa consequences of variant. Set to ivarMinDepth for consistency with consensus
    csqDpThreshold = 10
}

process {
    errorStrategy = { task.exitStatus == 255 ? 'retry' : 'terminate' }
    maxRetries = 5  
}